<!DOCTYPE html>
<html lang="en">
  <%- include("../partials/head.ejs") %>
  <body>
    <!-- Header-->
    <%- include("../partials/header.ejs") %>

    <main class="all-products-main">
      <section class="navbar-products">
        <div>
          <h2>PRODUCTOS</h2>
        </div>
        <div class="filter-products">
          <button type="button">
            <p>Filtrar</p>
            <i class="fas fa-sort-down"></i>
          </button>
        </div>
      </section>

      <section class="all-products-container">
        <% for (let i = 1; i< products.length; i++) { %>

        <article class="container-product">
          <a href="/products/detail/<%= i %> ">
            <img
              src="/images/products/<%= products[i].image %>"
              alt="imagen producto"
            />
            <div class="product-descpription">
              <h3>
                <strong
                  ><%= products[i].brand + " " + products[i].model %></strong
                >
              </h3>
              <p><%=products[i].shortDescription %></p>
              <p><strong>$<%=products[i].price %></strong></p>

              <div class="container-edit-product-button">
                <% if(locals.isAdminLogged){ %>
                <a href="/admin/products/edit/<%= products[i].id %>">
                  <button type="submit" class="edit-product-button">
                    Editar
                  </button>
                </a>
                <!--  
                  <form
                  method="POST"
                  action="/admin/editproduct/<%= products[i].id %>?_method=PUT"
                  >
                  <button type="submit" class="edit-product-button">
                    Editar
                  </button>
                </form>
              -->

                <form
                  method="POST"
                  action="/admin/products/delete/<%= products[i].id %>?_method=DELETE"
                >
                  <button type="submit" class="edit-product-button">
                    Eliminar
                  </button>
                </form>
                <% } %>
              </div>
            </div>
          </a>
        </article>
        <% } %>
      </section>
    </main>

    <!-- Footer-->
    <%- include("../partials/footer.ejs")%>
  </body>
</html>
